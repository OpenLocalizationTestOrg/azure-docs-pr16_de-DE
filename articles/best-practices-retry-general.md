<properties
   pageTitle="Wiederholen Sie die allgemeinen Leitfaden | Microsoft Azure"
   description="Leitfaden zum nach vorübergehende Fehlerbehandlung wiederholen."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="christb"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="07/13/2016"
   ms.author="masashin"/>

# <a name="retry-general-guidance"></a>Wiederholen Sie die allgemeinen Leitfaden

[AZURE.INCLUDE [pnp-header](../includes/guidance-pnp-header-include.md)]

## <a name="overview"></a>(Übersicht)

Alle Programme, die Kommunikation mit remote-Diensten und Ressourcen müssen zum vorübergehenden Fehler vertrauliche. Dies ist insbesondere der Fall für Applikationen, die in der Cloud, ausgeführt werden, in dem die Art der Umgebung und über das Internet Connectivity bedeutet, dass diese Typen von Fehlern wahrscheinlich Weitere häufig auftretende werden. Vorübergehenden Fehler enthalten die vorübergehende Verlust der Netzwerkkonnektivität Komponenten und Dienste, die vorübergehenden Ausfall eines Dienstes oder Zeitlimit, die auftreten, wenn ein Dienst ausgelastet ist. Diese Fehler werden häufig automatisch behoben, und die Aktion wiederholt wird, nach einer geeigneten Verzögerung ist wahrscheinlich erfolgreich ausgeführt werden kann.

Dieses Dokument beschreibt allgemeine Hinweise zum vorübergehenden Fehlerbehandlung. Informationen zur Behandlung von vorübergehenden Fehler beim Verwenden der Microsoft Azure-Webdienste finden Sie unter [Azure Service-spezifische Richtlinien zu wiederholen](best-practices-retry-service-specific.md).

## <a name="why-do-transient-faults-occur-in-the-cloud"></a>Warum treten vorübergehenden Fehler in der Cloud?

In jeder Umgebung, die auf jeder Plattform und Betriebssystem und in jede Art von Anwendung können vorübergehenden Fehler auftreten. In der Lösungen ansässig lokale, lokale Infrastruktur, Leistung und Verfügbarkeit der Anwendung und seine Komponenten wird in der Regel beibehalten bis teure und häufig unter verwendeten Hardwareredundanz ausgeführt, und Komponenten und Ressourcen werden in der Nähe jeder ein anderes. Während dies weniger wahrscheinlich ein Fehler aufgetreten ist, können sie weiterhin vorübergehenden Fehler- und auch einem Ausfall durch unvorhergesehene Ereignisse wie externe Power Lieferung oder Netzwerkproblemen oder andere Notfallszenarios führen.

Cloud-hosting, private Cloudsysteme, einschließlich kann einen höheren allgemeinen Verfügbarkeit anbieten, mithilfe von freigegebenen Ressourcen, Redundanz-, automatisches Failover und dynamische Zuordnung von Ressourcen über eine Vielzahl von Computeknoten heutzutage Thema. Die Art der folgenden Umgebungen kann jedoch auch bedeuten, dass vorübergehenden Fehler mehr auftreten können. Es gibt verschiedene Gründe geben:

* Viele Ressourcen in einer Cloud-Umgebung freigegeben werden und Zugriff auf diese Ressourcen zum Schutz der Ressource begrenzungsebene unterliegt. Einige Dienste lehnt Verbindungen, wann die Last auf eine bestimmte Ebene, oder eine maximale Durchsatzrate, erreicht ist um die Verarbeitung von vorhandenen Anforderungen zulassen und Leistung des Diensts für alle Benutzer verwalten. Begrenzungsebene hilft, um die Qualität des Diensts für Nachbarn und anderen Mandanten mithilfe der gemeinsam verwendeten Ressourcen zu verwalten.
* Cloud-Umgebungen basieren, verwenden Sie große Zahlen heutzutage Thema Hardware Einheiten. Sie bieten Leistung durch dynamisch die Last über mehrere computing Einheiten und Infrastrukturkomponenten verteilen und Vorführen Zuverlässigkeit durch automatisch Wiederverwendung oder Fehler beim Einheiten ersetzen. Diese dynamischen Natur also gelegentlich vorübergehenden Fehler und temporäre Verbindungsfehler auftreten können.
* Es gibt häufig weitere Hardware-Komponenten, einschließlich Netzwerkinfrastruktur, wie z. B. Router und Lastenausgleich, zwischen der Anwendung und Ressourcen und Diensten verwendeten. Diese zusätzlichen Infrastruktur kann gelegentlich zusätzliche Verbindung Wartezeit und Fehlern durch eine vorübergehende Verbindung vorstellen.
* Netzwerkprobleme zwischen dem Client und auf dem Server ist möglicherweise Variable, besonders, wenn Kommunikation mit das Internet kreuzt. Auch in der lokalen Speicherorten möglicherweise sehr beanspruchen Datenverkehr verlangsamen Kommunikation und bei unterbrochener zu Verbindungsfehlern führen.

## <a name="challenges"></a>Probleme
Vorübergehenden Fehler können eine große Auswirkung auf die angenommene Verfügbarkeit der Anwendung, haben, auch wenn es unter Umständen für alle vorhersehbar ausführlich getestet wurde. Um sicherzustellen, dass die Cloud gehosteten Applikationen zuverlässig funktionieren, müssen diese vor folgenden Problemen beantworten können:

* Die Anwendung muss Erkennen von Fehlern beim ersten auftreten, und prüfen Sie, ob diese Fehler wahrscheinlich vorübergehende, weitere langfristig sind oder terminal Fehlern sind. Andere Ressourcen sind wahrscheinlich unterschiedliche Antworten zurückzugeben, wenn ein Fehler auftritt, und diese Antworten auch je nach Kontext des Vorgangs variieren können. Angenommen, die Antwort nach einem Fehler beim Lesen von Speicher Antwort nach einem Fehler abweicht möglicherweise beim Erstellen von Speicher. Viele Ressourcen und Dienste müssen Verträge gut dokumentierten vorübergehende Fehler auf. Jedoch, wo diese Informationen nicht verfügbar ist es möglicherweise schwierig zu finden die Art der den Fehler und gibt an, ob es wahrscheinlich vorübergehend sein wird.
* Die Anwendung muss möglicherweise den Vorgang zu wiederholen, wenn es ermittelt, dass der Fehler ist zu rechnen vorübergehend sein und verfolgen die Anzahl, wie oft der Vorgang wiederholt wurde.
* Die Anwendung muss eine geeignete Strategie für die Wiederholungsversuche verwenden. Diese Strategie gibt an, wie oft sollten sie wiederholen, die Verzögerung zwischen jedem Versuch und die Aktionen nach einem Fehler beim Versuch ausführen. Die entsprechende Anzahl der Versuche und die Verzögerung zwischen jeden, ist häufig schwierig zu ermitteln und variieren basierend auf den Typ der Ressource als auch das Betriebssystem aktuelle Zustände der Ressource und der Anwendung selbst.

## <a name="general-guidelines"></a>Allgemeine Richtlinien
Die folgenden Richtlinien helfen Ihnen eine geeignete vorübergehende Fehlerstrukturanalyse Übergabe Verfahren für Ihre Applikationen Entwurf:

* **Bestimmen Sie, ob eine Methode integrierten "Wiederholen" vorhanden ist:**
  * Viele Dienste bieten eine SDK oder Client-Bibliothek, die eine vorübergehende Verfahren für Fehlerbehandlung enthält. Die Richtlinie "Wiederholen" verwendeten ist in der Regel die Art und den Dienst Ziel zugeschnitten. Alternativ möglicherweise REST-Schnittstellen für Dienste Informationen zurück, die hilfreich sein in bestimmen, ob eine Wiederholung geeigneten, und wie lange warten, bevor der nächste "Wiederholen" Versuch handelt.
  * Verwenden des integrierten Neuversuchsmechanismus, wobei eine zur Verfügung, wenn Sie bestimmte und verständliche Anforderungen verfügen, die bedeutet, dass eine andere "Wiederholen" Verhalten besser geeignet ist.
* **Ermitteln, ob der Vorgang für die Wiederholung geeignet ist**:
  * Sie sollten nur Vorgänge erneut versuchen, wobei die Fehler nur vorübergehend auftreten (normalerweise die Art des Fehlers erkennbar), und es ist mindestens einige Wahrscheinlichkeit, die der Vorgang erfolgreich durchgeführt werden kann, wenn erneut versucht. Es ist jedoch nicht sinnvoll es wird erneut versucht Vorgänge, die angeben, wie etwa einer Datenbank einen ungültigen Vorgang ein Element, das nicht vorhanden ist, aktualisieren oder Anfragen an einen Dienst oder eine Ressource, die einen schwerwiegenden Fehler verursacht wurde
  * Im Allgemeinen sollten Sie implementieren Wiederholungsversuche nur, wo die volle Auswirkung Dies bestimmt werden kann, und die Bedingungen sind gut verstanden und überprüft werden können. Wenn dies nicht der Fall ist, lassen Sie sie zum Aufrufen von Code Wiederholungsversuche implementiert wird. Denken Sie daran, dass der Fehler zurückgegeben wird, von Ressourcen und Dienste außerhalb des Steuerelements möglicherweise über einen Zeitraum weiterentwickelt möglicherweise Sie Ihre Logik zum vorübergehenden Fehlerstrukturanalyse Erkennung erneut aufzurufen müssen.
  * Wenn Sie Dienste oder Komponenten erstellen, erwägen Sie, dass implementieren Fehlercodes und Nachrichten, mit dem Clients zu bestimmen, ob diese wiederholen sollte Operationen fehlgeschlagen ist. Insbesondere auswählen, ob der Client sollte wiederholen Sie den Vorgang (z. B. indem Zurückgeben eines Werts **IsTransient** ) und eine geeignete Verzögerung vor der nächsten Wiederholungsversuch vorschlagen. Wenn Sie einen Webdienst erstellen, sollten Sie benutzerdefinierte Fehler in Ihrem Dienst Verträge definiert zurückgeben. Obwohl generische Clients, diese zu lesen können möglicherweise nicht, werden er hilfreich sein beim Erstellen von benutzerdefinierten Clients.
* **Bestimmen Sie einen entsprechenden "Wiederholen" zählen und Intervall:**
  * Es ist entscheidend, die Anzahl der Wiederholungsversuche und das Intervall, in den Typ des Anwendungsfall-optimieren. Wenn Sie eine ausreichende Anzahl an, wie oft nicht erneut versuchen, die Anwendung nicht zum Abschließen des Vorgangs und wahrscheinlich einen Fehler auftreten. Wenn Sie nicht zu oft wiederholen oder mit zu kurz ein Intervall zwischen versucht, die Anwendung kann potenziell Ressourcen wie Threads, Verbindungen und Arbeitsspeicher für längere Zeit, die die Integrität der Anwendung beeinträchtigen werden enthalten.
  * Die entsprechenden Werte für den Zeitraum und die Anzahl der Wiederholungsversuche abhängig von den Typ des Vorgangs versucht wird. Angenommen, wenn der Vorgang Teil einer Interaktion des Benutzers ist, das Intervall sollten kurz und nur ein paar Wiederholungsversuche zu vermeiden, dass Benutzer, die auf eine Antwort zu warten (das hält Verbindungen zu öffnen, und reduzieren Verfügbarkeit für andere Benutzer). Wenn der Vorgang Teil eines Workflows lange laufenden oder kritische ist, wo finde ich absagen und einen Neustart des Prozesses teure oder zeitaufwändiger, ist es sinnvoll, warten mehr Abstand zwischen den versuchen, und wiederholen mehrmals.
  * Ermitteln die entsprechenden Intervalle zwischen Wiederholungsversuche ist der am häufigsten schwierig Teil des Entwerfen einer erfolgreichen Strategie. Verwenden Sie die folgenden Arten von Wiederholungsintervalls standardmäßige Strategien:
      * **Exponential Back-deaktivieren**. Die Anwendung wartet kurz vor der ersten Wiederholung, und klicken Sie dann wesentlich Zeiten zwischen jedes nachfolgende "Wiederholen" zu erhöhen. Angenommen, sie möglicherweise wiederholen Sie den Vorgang nach 3 Sekunden 12 Sekunden, 30 Sekunden usw.
      * **Inkrementell Intervallen**. Die Anwendung wartet kurz vor der ersten Wiederholung, und klicken Sie dann inkrementell steigenden Zeiten zwischen jedes nachfolgende "Wiederholen". Angenommen, sie möglicherweise wiederholen Sie den Vorgang nach 3 Sekunden 7 Sekunden, 13 Sekunden usw.
      * **Regelmäßigen Abständen**. Die Anwendung wartet für den gleichen Zeitraum zwischen den einzelnen versuchen. Beispielsweise können sie den Vorgang alle 3 Sekunden wiederholen.
      * **Wiederholen Sie sofort**. Manchmal ist eine vorübergehende Fehlerstrukturanalyse extrem kurz, vielleicht durch ein Ereignis wie ein Netzwerk Paket Konflikt oder einer Sammlung in einer Hardwarekomponente verursacht. In diesem Fall ist das Wiederholen des Vorgangs sofort geeignet, da es möglicherweise fehlschlagen, wenn der Fehler in der Zeit gelöscht wurde, die Anwendung zusammenstellen und Senden der nächsten Anforderung dauert. Jedoch sollten nie bestehen mehrere sofortige "Wiederholen" Versuch, und Sie sollten wechseln zu alternativen Strategien, wie z. B. exponentiellen Back deaktivieren oder fallbackabfragen Aktionen, schlägt die sofortige "Wiederholen".
      * **Zufällige Anordnung**. Strategien oben aufgeführten Wiederholungsversuche möglicherweise eine zufällige Anordnung, um zu verhindern, dass mehrere Instanzen des Clients senden weitere Versuche zur gleichen Zeit einbeziehen. Beispielsweise eine Instanz möglicherweise wiederholen Sie den Vorgang nach 3 Sekunden, 11 Sekunden, 28 Sekunden usw. während einer anderen Instanz Wiederholung des Vorgangs nach 4 Sekunden 12 Sekunden, 26 Sekunden möglicherweise usw.. Zufällige Anordnung ist eine nützliche Technik, die mit anderen Strategien kombiniert werden kann.  
  * Verwenden Sie als allgemeine Richtlinie einer exponentiellen Back-off Strategie für Aktionen im Hintergrund ausgeführt und sofortige oder reguläre Intervall "Wiederholen" Strategien für interaktiven Vorgänge ein. In beiden Fällen sollten Sie die Verzögerung auswählen und die Anzahl der "Wiederholen", damit die maximale Wartezeit für alle Wiederholungsversuche befindet sich innerhalb der Anforderung zum erforderlichen End-to-End-Wartezeit für.
  * Berücksichtigen Sie die Kombination aller Faktoren, die auf die maximale Timeout für einen Vorgang wiederholt beitragen. Zu diesen Faktoren zählen die Zeit für eine fehlgeschlagene Verbindung zu einer Antwort (in der Regel durch einen Timeoutwert im Client festgelegt) sowie die Verzögerung zwischen Wiederholungsversuche und die maximale Anzahl der Wiederholungsversuche. Die Summe aller diese Zeiten kann zu Fehlern im sehr großen gesamten Vorgang Zeiten, insbesondere wenn mithilfe einer exponentiellen Verzögerung Strategie wiederholt die Stelle, an der das Intervall zwischen schnell nach jeder Fehler vergrößert wird. Wenn ein Vorgang eine bestimmte Vereinbarung zum Servicelevel (Vereinbarung zum SERVICELEVEL) erfüllt werden muss, muss die Operation-Gesamtzeit, einschließlich aller Zeitlimit und Verzögerungen innerhalb, die in der Vereinbarung zum SERVICELEVEL definiert werden
  * Over-aggressive Wiederholen von Strategien zu kurze Intervallen haben oder auch möglicherweise wiederholt, können eine negative Auswirkung auf die Ressource oder den Dienst haben. Dies kann verhindern die Ressource oder den Dienst aus überladenen Zustand wiederherstellen, und werden weiterhin blockieren oder ablehnen von Besprechungsanfragen. Diese Ergebnisse in einem Vicious Kreis, mehr Anfragen für die Ressource oder Dienst und daher die Möglichkeit zum Wiederherstellen von gesendet werden, wird weiter reduziert.
  * Berücksichtigen des Timeouts der Vorgänge bei "Wiederholen" Intervalle vermieden werden sollten ebenso erneut versucht sofort (beispielsweise, wenn das Timeout des Wiederholungsintervalls ähnelt) auswählen. Erwägen Sie auch wenn Sie total mögliche Periode (das Timeout plus die Intervalle "Wiederholen") zu unterhalb eines bestimmten Gesamtzeit beibehalten müssen. Vorgänge, die ungewöhnlich kurzen oder langen Zeitlimit möglicherweise beeinflussen, wie lange zu warten, und wie oft Sie den Vorgang zu wiederholen.
  * Verwenden Sie den Typ der Ausnahme und alle darin enthaltenen Daten oder Fehlercodes und Nachrichten aus dem Dienst, um das Intervall und die Anzahl der Wiederholungsversuche zu optimieren zurückgegeben. Für Beispiel, einige Ausnahmen oder Fehlercodes (z. B. die HTTP Fehlercode 503 Dienst nicht mit einer Kopfzeile "Wiederholen" nach in der Antwort) hindeuten wie lange des Fehlers dauern kann, oder dass der Dienst ausgefallen ist und reagiert nicht auf einem anschließenden Versuch.
* **Vermeiden Anti-Muster**:
  * In den meisten Fällen vermeiden Sie Implementierungen, die duplizierten Layer "Wiederholen" Code enthalten. Vermeiden Sie dies Designs, cascading "Wiederholen" Verfahren enthalten, oder, wenn Sie bestimmte Anforderungen diesen Bedarf haben in jeder Phase eines Vorgangs implementieren, bei dem eine Hierarchie von Besprechungsanfragen, versuchen Sie es erneut. Verwenden Sie in folgenden Ausnahmefällen Richtlinien, die verhindern, dass der Wiederholungsversuche und Verzögerung Perioden übermäßige Zahlen, und stellen Sie sicher, dass Sie die Folgen kennen. Beispielsweise ist eine Komponente in ein anderes anfordert, versucht insgesamt gegen den Dienst welcher dann Zugriffsschutz der Zieldienst, und versuchen Sie es erneut mit der Anzahl der drei auf beide Aufrufe implementieren werden neun wiederholen. Viele Dienste und Ressourcen Implementieren eines integrierten Wiederholungsmechanismus und sollten Sie ermitteln, wie Sie dies ändern, wenn Sie auf einer höheren Ebene Wiederholungsversuche implementieren müssen oder deaktivieren können.
  *  Nie implementieren Sie eine Methode endlos "Wiederholen" aus. Dies ist wahrscheinlich zu verhindern, dass die Ressource oder den Dienst aus Überladung Situationen wiederherstellen und dazu führen, dass begrenzungsebene und abgelehnt Verbindungen verlängern fortsetzen. Verwenden Sie eine begrenzte Anzahl oder Wiederholungsversuche oder implementieren ein Muster wie [Sicherung](http://msdn.microsoft.com/library/dn589784.aspx) zu durch den Dienst wiederherstellen können.
  * Führen Sie eine sofortige "Wiederholen" nie öfter als einmal vorhanden.
  * Vermeiden Sie eine normale Wiederholungsintervalls, besonders, wenn Sie eine große Anzahl der Wiederholungsversuche, beim Zugriff auf Dienste und Ressourcen in Azure haben. Der optimale Ansatz ist, dass dieses Szenario einer exponentiellen Back-off Strategie mit einem entfernten Verbindung neuesten ist.
  * Verhindern, dass mehrere Instanzen desselben Clients oder mehrerer Instanzen von verschiedenen Clients aus Wiederholungsversuche zur gleichen Zeit senden. Wenn dies zu rechnen ist, stellen Sie vor zufällige Anordnung in der Intervalle "Wiederholen".
* **Testen Sie Ihre Strategie "Wiederholen" und der Implementierung:**
  * Stellen Sie sicher, dass Sie vollständig Ihrer "Wiederholen" Strategie Implementierung unter als Breite eine Reihe von Umständen wie möglich, Testen besonders, wenn Sie sowohl die Anwendung und die Zielressourcen oder Dienste verwendeten unter ausgelastet sind. Wenn Sie um während des Testens Verhalten zu überprüfen, können Sie folgende Aktionen ausführen:
      * Fügen Sie vorübergehende und dauerhaftes Fehlern in den Dienst an. Senden Sie beispielsweise ungültige Anfragen oder fügen Sie Code hinzu, der erkennt Test anfordert und reagiert mit verschiedenen Fehlertypen. Ein Beispiel für die Verwendung von TestApi, finden Sie unter [Fehlerstrukturanalyse einfügen Testen mit TestApi](http://msdn.microsoft.com/magazine/ff898404.aspx) und [Einführung TestApi – Teil 5: verwalteten Code Fehlerstrukturanalyse einfügen APIs](http://blogs.msdn.com/b/ivo_manolov/archive/2009/11/25/9928447.aspx).
      * Erstellen Sie ein Mock für die Ressource oder den Dienst, der einen Zellbereich Fehler zurückgibt, die der Dienst reale zurückgegeben werden. Stellen Sie sicher, Sie alle Arten von Fehler behandelt, die strategische "Wiederholen" erkennen vorgesehen ist.
      * Erzwingen, dass vorübergehende Fehler auftreten, indem Sie vorübergehend deaktivieren oder den Dienst überladen, wenn es sich um einen benutzerdefinierten Dienst handelt, die Sie erstellt und bereitgestellt (Sie sollten nicht, natürlich versuchen, freigegebenen Ressourcen überladen oder gemeinsame Dienste in Azure).
      * Erwägen Sie für HTTP-basierte APIs die FiddlerCore Bibliothek in der automatisierten Tests so ändern Sie das Ergebnis der HTTP-Anfragen durch Hinzufügen von zusätzlichen Zeitangaben oder durch Ändern der Antwort (beispielsweise die HTTP-Statuscode, Kopf- und Textkörper oder andere Faktoren). Auf diese Weise können deterministisch Testen einer Teilmenge der Bedingungen Fehler, ob vorübergehenden Fehlern oder anderen Fehlertypen. Weitere Informationen finden Sie unter [FiddlerCore](http://www.telerik.com/fiddler/fiddlercore). Beispiele für die Verwendung die Bibliothek, besonders der Klasse **HttpMangler** , untersuchen Sie den [Quellcode für den Azure-Speicher SDK](https://github.com/Azure/azure-storage-net/tree/master/Test).
      * Führen Sie hoher Auslastungsfaktor und gleichzeitige überprüft, stellen Sie sicher, dass die Wiederholungsmechanismus und Strategie funktioniert ordnungsgemäß unter diesen Umständen und nicht beeinträchtigen auf den Vorgang des Clients oder Kreuzkontamination zwischen Anfragen verursachen.
* **Wiederholen Sie den Vorgang Richtlinienkonfigurationen zu verwalten:**
  * Einer _Richtlinie wiederholen_ , stellt eine Kombination aller Elemente der strategische "Wiederholen". Definiert das Erkennung Verfahren, die bestimmt, ob ein Fehler wahrscheinlich vorübergehend, ist den Typ des Intervalls (z. B. normale, exponentiellen Back-abmelden und zufällige), die tatsächliche Intervall Wert(e), und wie oft verwenden zu wiederholen.
  * Wiederholungsversuche müssen in vielen Orten innerhalb von auch die einfachste Anwendung, und klicken Sie in allen Ebenen der komplexere Applikationen implementiert werden. Anstatt Programmieren die Elemente jeder Richtlinie an mehreren Orten, erwägen Sie eine zentrale zum Speichern von alle Richtlinien. Angenommen, speichern Sie die Werte, wie etwa das Intervall und wiederholen Sie im vorherigen Anwendung Konfigurationsdateien, zur Laufzeit zu lesen, programmgesteuert zu erstellen Sie und die Richtlinien "Wiederholen". Dies vereinfacht die Einstellungen, verwalten und ändern und optimieren die Werte und zum Ändern von Anforderungen und Szenarien mit mehreren Antworten. Entwerfen Sie jedoch das System, um die Werte speichern statt jedes Mal Datei erneutes Lesen einer Konfigurations, und stellen Sie sicher, dass die passende Standards verwendet werden, wenn die Werte aus der Konfiguration abgerufen werden können.
  * Erwägen Sie in einer Azure Cloud Services-Anwendung speichern die Werte, die verwendet werden, um die "Wiederholen" Richtlinien zur Laufzeit in der Konfiguration Dienstdatei erstellen, damit sie geändert werden können, ohne die Anwendung neu starten.
  * Nutzen Sie integriert oder Standard "Wiederholen" Strategien im Client APIs, die Sie, doch nur verwenden, sofern sie für Ihr Szenario geeignete sind, zur Verfügung. Diese Strategien sind in der Regel allgemeine. In einigen Szenarien können sie sein alle, die erforderlich ist, jedoch in anderen Szenarien möglicherweise nicht den vollständigen Bereich der Optionen, um Ihren spezifischen Anforderungen entsprechend bieten. Sie müssen die Auswirkungen der Einstellungen auf Anwendung durch testen, um die am besten geeignete Werte festzustellen verstehen.
* **Melden Sie sich und Nachverfolgen von Fehlern durch eine vorübergehende und dauerhaftes:**
  * Strategische "Wiederholen" Kundendienstmitarbeiter Behandlung von Ausnahmen und andere Ausstattung, die beim Wiederholungsversuche vorgenommen werden protokolliert. Während einer gelegentliche vorübergehende Fehler und wiederholen Sie den Vorgang zu erwarten, sind und dass kein Problem, normale und zunehmenden Anzahl Wiederholungsversuche, ist häufig ein Indikator für ein Problem, das möglicherweise zu einem Fehler führen, oder ist aktuell Anwendung Leistung und Verfügbarkeit beeinträchtigen.
  * Melden Sie sich vorübergehenden Fehler als Warnung Einträge und nicht als Fehler Einträge, sodass die Überwachung Systeme nicht diese als Anwendungsfehler erkennen, die falsche Alarme auslösen kann.
  * Erwägen Sie zum Speichern eines Werts in der Protokolleinträge, die zeigt an, ob die Wiederholungsversuche im Dienst begrenzungsebene oder durch andere Arten von Fehlern, wie z. B. Verbindungsfehlern, verursacht wurden, damit Sie während der Analyse der Daten unterschieden werden können. Eine Erhöhung der Anzahl der Drosselung Fehler ist oft ein Indikator für einen Fehler beim Entwurf in der Anwendung oder zu einer Premiumdienst zu wechseln, die dedizierten Hardware bietet werden müssen.  
  * Erwägen Sie messen und Protokollierung die Gesamtzeit für Vorgänge, die einen Wiederholungsmechanismus enthalten geöffnet. Dies ist ein guter Indikator für das Verhalten insgesamt vorübergehenden Fehler auf Benutzer Reaktionszeiten, Prozess Wartezeit und die Effizienz der Anwendungsfälle verwenden. Log die Anzahl der Wiederholungsversuche, um die Faktoren zu verstehen, die auf die Antwortzeit beigetragen auch ist aufgetreten.
  * Erwägen Sie Implementieren eines werden und für die Überwachung Systems, das Benachrichtigungen, wenn die Nummer auslösen kann und Zinsfuß Fehlern, die durchschnittliche Anzahl der Wiederholungsversuche oder wächst die generelle Zeiten für Vorgänge erfolgreich verlaufen, geöffnet.
* **Verwalten von Vorgängen, die nicht ständig:**
  * Umstände, wo der Vorgang weiterhin bei jedem Versuch fehlschlägt, und unbedingt berücksichtigen, wie Sie diese Situation behandelt, werden:
      * Obwohl eine Strategie "Wiederholen" die maximale Anzahl an, wie oft definieren, die eine Operation wiederholt werden soll, wird es die Anwendung, wiederholen den Vorgang erneut aus, mit der gleichen Anzahl der Wiederholungsversuche nicht verhindert. Wenn Dienst Verarbeitung Ordnung mit einem schwerwiegenden Fehler, die es dauerhaft von Aktion zusammengeführt werden fehlschlägt, möglicherweise die Strategie "Wiederholen" beispielsweise einen Verbindungstimeout erkennen und berücksichtigen eine vorübergehende Fehlerstrukturanalyse sein. Der Code wird wiederholen Sie den Vorgang eine bestimmte Anzahl von Zeiten, und geben Sie dann nach oben. Jedoch bei einem anderen Kunden Ordnung platziert, wird der Vorgang erneut - versucht, obwohl es jedes Mal treten sicher ist.
      * Um zu verhindern, dass kontinuierlichen Wiederholungsversuche für Vorgänge, die nicht ständig, erwägen Sie Implementieren der [Schutzschalter Muster](http://msdn.microsoft.com/library/dn589784.aspx)aus. In diesem Muster Wenn die Anzahl der Fehler in einem angegebenen Zeitfenster den oberen Schwellenwert überschreitet werden Anfragen zum Anrufer sofort als fehlerhaft, zurückgegeben ohne Zugriffsversuch auf den Fehler bei einer Ressource oder den Dienst.
      * Testen der Anwendung kann regelmäßig Dienst auf wiederkehrender Basis und mit sehr lange Intervalle zwischen Anfragen, um zu ermitteln, sobald diese verfügbar wird. Eine geeignete Zeitspanne, hängt von dem Szenario, wie etwa die Wichtigkeit des Vorgangs und der Art der Dienst und möglicherweise etwas zwischen ein paar Minuten, und mehrere Stunden. An der Stelle, wo der Test erfolgreich ist, können Sie die Anwendung Ihren normalen Betrieb wiederaufnehmen und Besprechungsanfragen an den neu wiederhergestellte Dienst übergeben.
      * In der Zwischenzeit möglicherweise liegen zurück zu einer anderen Instanz des Diensts (vielleicht in einem anderen Datacenter oder einer Anwendung), verwenden Sie einen ähnlichen Dienst, der kompatibel (vielleicht einfacher) Funktionalität bietet, oder einige Alternativen Operationen in der Erwartung, dass der Dienst bald verfügbar sind. Beispielsweise kann es zum Speichern von Besprechungsanfragen für den Dienst in einer Warteschlange angebracht sein oder Daten zu speichern und sie später wiederzugeben. Andernfalls können Sie möglicherweise leiten Sie den Benutzer zu einer alternativen Instanz der Anwendung, die Leistung der Anwendung, aber weiterhin anbieten akzeptablen Funktionalität oder nur Absenderadresse präsentieren von einer Nachricht an die Benutzer, die angibt, der die Anwendung nicht verfügbar ist.

* **Weitere Überlegungen**
  * Wenn auf die Werte für die Anzahl der Wiederholungsversuche und Intervalle "Wiederholen" für eine Richtlinie, müssen berücksichtigen Sie, wenn der Vorgang auf dem Dienst oder Ressource Teil eines Vorgangs langer oder mit mehreren Schritten ist. Kann es schwierig sein, oder auf alle anderen Betrieb Schritte zu berücksichtigen, die bereits bei einem erfolgreichen teure schlägt fehl. In diesem Fall eine sehr lange Intervall und einer großen Anzahl der Wiederholungsversuche zulässigen möglicherweise, solange sie nicht andere Vorgänge durch halten oder Sperren knappe Ressourcen blockiert.
  * Erwägen Sie, wenn Sie den gleichen Vorgang wiederholen Inkonsistenzen in Daten führen kann. Wenn einige Teile eines Prozesses mit mehreren Schritten wiederholt werden und die Vorgänge nicht Idempotent sind, kann dies zu Inkonsistenzen führen. Beispielsweise wird ein Vorgang, der einen Wert erhöht Wenn wiederholt, ein ungültiges Ergebnis erzeugen. Einen Vorgang, der eine Nachricht an eine Warteschlange sendet wiederholte kann Inkonsistenzen in der Nachricht Consumer verursachen, wenn er nicht doppelte Nachrichten ermitteln kann. Um dies zu verhindern, stellen Sie sicher, dass Sie jeden Schritt als Idempotent Vorgang entwerfen. Weitere Informationen zu Messagingtransport finden Sie unter [Messagingtransport Mustern](http://blog.jonathanoliver.com/2010/04/idempotency-patterns/).
  * Erwägen Sie den Umfang der die Vorgänge, die wiederholt werden soll. Angenommen, ist es wahrscheinlich einfacher zu implementieren "Wiederholen" Code auf einer Ebene, die mehrere Vorgänge Steuerelementgruppe ein, und wiederholen sie alle, wenn eine fehlschlägt. Auf diese Weise kann jedoch in Messagingtransport Probleme oder unnötige zurücksetzen Vorgänge führen.
  * Wenn Sie einen Bereich "Wiederholen", der mehrere Vorgänge umfasst auswählen, sollten Sie berücksichtigen die Gesamtwartezeit aller von ihnen bei der Intervalle "Wiederholen" bestimmt wird, wann die Zeit für die Überwachung und vor dem Auslösen von Benachrichtigungen für Fehlern.
  * Erwägen Sie die strategische "Wiederholen" Nachbarn und andere Mandanten in einer freigegebenen Anwendung oder Auswirkungen möglicherweise bei Verwendung von freigegebenen Ressourcen und Dienste. Anspruchsvollen "Wiederholen" Richtlinien können eine wachsende Anzahl von vorübergehenden Fehler auftreten für Applikationen, die Ressourcen und Dienste aufweisen, und diese anderen Benutzern verursachen. Ebenso kann eine Anwendung, die von anderen Benutzern Dienste und Ressourcen implementierten "Wiederholen" Richtlinien beeinträchtigt werden. Zum wichtiger Applications empfiehlt es sich, Premiumdienste zu verwenden, die nicht freigegeben wurden. Dies bietet Ihnen viel mehr Kontrolle über das Laden und infolge begrenzungsebene dieser Ressourcen und Dienste, die den Mehrkosten ausrichten kann.

## <a name="more-information"></a>Weitere Informationen

* [Wiederholen Sie den Vorgang Azure Service-spezifische Richtlinien](best-practices-retry-service-specific.md)
* [Der vorübergehende Fehlerbehandlung Application Block](http://msdn.microsoft.com/library/hh680934.aspx)
* [Schutzschalter Muster](http://msdn.microsoft.com/library/dn589784.aspx)
* [Ermittlung Transaktion Muster](http://msdn.microsoft.com/library/dn589804.aspx)
* [Messagingtransport Mustern](http://blog.jonathanoliver.com/2010/04/idempotency-patterns/)
